<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lançamento de Resultados</title>
    <link rel="stylesheet" href="admin_style.css"> 
</head>
<body>
    <header role="banner"><div class="header-content"><h1>Área de Gestão</h1><h2 id="page-title">Lançamento de Resultado Individual</h2><button class="back-button" onclick="window.location.href='/painel_gestao.html'"> Voltar ao Painel</button></div></header>
    <main id="main-content" role="main">
        <section class="management-section">
            <form id="lancamento-form">
                <div class="form-step">
                    <h3>1. Encontre o Aluno</h3>
                    <div class="form-group">
                        <label for="aluno-search-input">Buscar Aluno por Nome ou INEP</label>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <input type="text" id="aluno-search-input" placeholder="Digite no mínimo 3 letras..." autocomplete="off" style="flex-grow: 1;">
                            <button type="button" id="add-student-btn" class="button"> + Novo Aluno </button>
                        </div>
                        <div id="aluno-search-results"></div>
                        <input type="hidden" id="selected-aluno-id" name="id_aluno">
                    </div>
                </div>
                <div id="evaluation-step" class="form-step" style="display: none;">
                    <h3>2. Preencha o Contexto da Avaliação</h3>
                    <div class="form-grid">
                        <div class="form-group"><label for="escola-select">Escola onde a avaliação foi aplicada</label><select id="escola-select" name="id_escola" required></select></div>
                        <div class="form-group"><label for="etapa-select">Etapa de Ensino na época</label><select id="etapa-select" name="id_etapa" required></select></div>
                        <div class="form-group"><label for="turma-select">Turma na época</label><select id="turma-select" name="id_turma" required disabled></select></div>
                        <div class="form-group"><label for="ano-select">Ano de Aplicação</label><select id="ano-select" name="ano_aplicacao" required></select></div>
                        <div class="form-group"><label for="avaliacao-select">Avaliação</label><select id="avaliacao-select" name="id_avaliacao" required disabled></select></div>
                        <div class="form-group"><label for="resultado-select">Resultado Obtido</label><select id="resultado-select" name="id_nivel_resultado" required disabled></select></div>
                        <div class="form-group"><label for="beneficiario-na-epoca">Era Beneficiário na Época?</label><select id="beneficiario-na-epoca" name="beneficiario_na_epoca" required><option value="NÃO">Não</option><option value="SIM">Sim</option></select></div>
                        <div class="form-group"><label for="transporte-na-epoca">Usava Transporte na Época?</label><select id="transporte-na-epoca" name="transporte_na_epoca" required><option value="NÃO">Não</option><option value="SIM">Sim</option></select></div>
                    </div>
                </div>
                <div class="modal-actions" style="margin-top: 1.5rem;"><button type="submit" id="save-btn" class="action-button" disabled>Lançar Resultado</button></div>
            </form>
        </section>
    </main>
    <div id="student-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3 id="modal-title">Adicionar Novo Aluno</h3>
            <form id="student-form">
                <div class="form-grid">
                    <div class="form-group"><label for="modal-nome_aluno">Nome Completo *</label><input type="text" id="modal-nome_aluno" name="nome_aluno" required></div>
                    <div class="form-group"><label for="modal-inep_aluno">INEP *</label><input type="text" id="modal-inep_aluno" name="inep_aluno" required placeholder="Digite os 12 números do INEP" pattern="\d{12}" title="O INEP deve conter exatamente 12 números." maxlength="12"></div>
                    <div class="form-group"><label for="modal-data_nascimento">Data de Nascimento</label><input type="date" id="modal-data_nascimento" name="data_nascimento"></div>
                    <div class="form-group"><label for="modal-nome_mae">Nome da Mãe</label><input type="text" id="modal-nome_mae" name="nome_mae"></div>
                    <div class="form-group"><label for="modal-cor_raca">Cor/Raça</label><select id="modal-cor_raca" name="cor_raca"><option value="Não Declarada">Não Declarada</option><option value="Branca">Branca</option><option value="Parda">Parda</option><option value="Preta">Preta</option><option value="Indígena">Indígena</option><option value="Amarela">Amarela</option></select></div>
                    <div class="form-group"><label for="modal-beneficiario_social">Beneficiário Social?</label><select id="modal-beneficiario_social" name="beneficiario_social"><option value="NÃO">Não</option><option value="SIM">Sim</option></select></div>
                    <div class="form-group"><label for="modal-pcd">Aluno PCD?</label><select id="modal-pcd" name="pcd_status"><option value="NÃO">Não</option><option value="SIM">Sim</option></select></div>
                    <div class="form-group" id="modal-pcd-details-group" style="display: none;"><label for="modal-pcd_details">Tipo de Deficiência</label><select id="modal-pcd_details" name="pcd_details"><option value="Física (cadeirante)">Física (cadeirante)</option><option value="Física (paralisia cerebral)">Física (paralisia cerebral)</option><option value="Física (outros)">Física (outros)</option><option value="Intelectual">Intelectual</option><option value="Multipla">Multipla</option><option value="Surdo/cegueira">Surdo/cegueira</option><option value="Síndrome de Asperger">Síndrome de Asperger</option><option value="Síndrome de Heller">Síndrome de Heller</option><option value="Síndrome de Rett">Síndrome de Rett</option><option value="Surdez leve ou moderada">Surdez leve ou moderada</option><option value="Surdez severa ou profunda">Surdez severa ou profunda</option><option value="Autismo">Autismo</option></select></div>
                    <div class="form-group"><label for="modal-transporte_escolar">Utiliza Transporte Escolar?</label><select id="modal-transporte_escolar" name="transporte_escolar"><option value="NÃO">Não</option><option value="SIM">Sim</option></select></div>
                </div>
                <div class="modal-actions"><button type="button" id="cancel-btn" class="cancel-button">Cancelar</button><button type="submit" class="action-button">Salvar Aluno</button></div>
            </form>
        </div>
    </div>
    <script src="lancar_resultados.js"></script>
</body>
</html>